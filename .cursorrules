# Cursor Rules for Agentic Knowledge Workspace

## Project Context
This is a multi-tenant SaaS application for document management and RAG-powered Q&A with AI agents.

## Tech Stack
- Frontend: Next.js 14 (App Router), TypeScript, TailwindCSS
- Backend: FastAPI (async), SQLAlchemy, pgvector
- AI: LangChain, OpenAI/Anthropic

## Code Style Guidelines

### Python (Backend)
- Use async/await for all I/O operations
- Type hints are required for all functions
- Use Pydantic for data validation
- Follow PEP 8 with 100 character line length
- Use structured logging with structlog

### TypeScript (Frontend)
- Use functional components with hooks
- Prefer async/await over promises
- Use TypeScript strict mode
- Follow Next.js 14 App Router conventions
- Use TailwindCSS for styling (no inline styles)

## File Organization
- Backend routes go in `backend/app/api/v1/`
- Business logic goes in `backend/app/services/`
- Database models in `backend/app/models/`
- Frontend pages in `frontend/app/`
- Reusable components in `frontend/components/`

## Best Practices
- Always use tenant_id filtering for multi-tenant data
- Use proper error handling and logging
- Add type hints/types for all functions
- Write descriptive commit messages
- Test all API endpoints before committing
- Use environment variables for configuration

## Database
- Use Alembic for all schema changes
- Never modify models without creating a migration
- Always add indexes for foreign keys
- Use pgvector for embeddings storage

## Security
- Never commit API keys or secrets
- Always validate user input with Pydantic
- Use proper RBAC checks in all protected routes
- Hash passwords with bcrypt
- Use JWT for authentication

## Testing
- Write tests for all new features
- Mock external API calls (OpenAI, etc.)
- Use pytest for backend, Jest/React Testing Library for frontend

#Documentation
Do not create any documentation, changelog, summary, or plan files (*.md) unless I explicitly ask.